<div *ngIf="institution">
    <h1>
        {{ institution.name }}
        <span *ngIf="institution.code">
            ({{ institution.code }})
        </span>
        <button
            *ngIf="isLoggedIn"
            [disabled]="isEditing"
            (click)="toggleEdit(true)"
        >
            <mat-icon color="primary" title="Edit this institution">
                edit
            </mat-icon>
        </button>
    </h1>
    <div *ngIf="isEditing else notEditing">
        <div class="row">
            <div class="col">
                <mat-form-field>
                    <mat-label>Institution name</mat-label>
                    <input
                        matInput
                        [formControl]="formControlName"
                    >
                </mat-form-field>
            </div>
            <div class="col">
                <mat-form-field>
                    <mat-label>Institution code</mat-label>
                    <input matInput [formControl]="formControlCode">
                </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <button
                    class="form-btn"
                    mat-raised-button
                    color="primary"
                    (click)="applyEdits()"
                >
                    Apply
                </button>
                <button class="form-btn" mat-raised-button (click)="cancelEdits()">
                    Cancel
                </button>
            </div>
        </div>
    </div>
    <ng-template #notEditing>
        <h2 class="mt-5 mb-0">Collections</h2>
        <div *ngIf="collections.length === 0 else collectionsList">
            This institution doesn't have any collections!<br>
            <button
                mat-button
                class="mt-2"
                (click)="addCollection()">
                Add a collection
            </button>
        </div>
        <ng-template #collectionsList>
            <mat-list>
                <a
                    *ngFor="let collection of collections"
                    [routerLink]="[COLLECTION_ROUTE, collection._id]"
                >
                    <mat-list-item>
                        {{ collection.name }}
                    </mat-list-item>
                </a>
            </mat-list>
        </ng-template>
    </ng-template>
</div>
